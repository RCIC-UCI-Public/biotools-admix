!include common.yaml
---
- package: samtools for storing large nucleotide sequence alignments
  name: samtools 
  version: "{{versions.samtools}}"
  extension: tar.bz2
  vendor_source: https://github.com/samtools/samtools/releases/download/{{version}}/{{name}}-{{version}}.{{extension}}
  description: |
    SAMtools {{version}}.  SAM (Sequence Alignment/Map) format is a 
    generic format for storing large nucleotide sequence alignments
  build:
#    preconfigure: sed -i 's/VERSION =/COVERAGE_VERSION =/' coverage.c
    configure: ./configure
    configure_args: > 
      --prefix={{root}}
      --with-htslib=$$HTSLIB_HOME --mandir={{root}}/share/man
    pkgmake: make 
    modules: 
      - "{{compiler}}/{{compiler_version}}"
      - htslib/{{versions.htslib}}
  extras: AUTHORS README LICENSE
  install:
     makeinstall: >
       mkdir -p $(ROOT){{root}};
       make install DESTDIR=$(ROOT)
  requires:
    - "{{compiler}}_{{compiler_version}}"
    - htslib_{{versions.htslib}}
