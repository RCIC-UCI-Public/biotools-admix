!include common.yaml
---
- package: bowtie2 
  name: bowtie2 
  version: "{{versions.bowtie2.version}}"
  addname: "{{versions.bowtie2.addname}}"
  py: "{{versions.bowtie2.python}}"
  baserpm: "{{name}}{{addname}}_{{version}}"
  parent: "{{pkg_defaults.app_path}}/{{name}}{{addname}}"
  vendor_source: https://github.com/BenLangmead/bowtie2/archive/v{{version}}.tar.gz
  description: >
    bowtie2 {{version}}  
  addfile: 
    - filter-requires-{{name}}.sh
    - filter-provides-{{name}}.sh
  build:
    modules: 
      - "{{compiler}}/{{compiler_version}}"
      - perl/{{versions.perl}}
      - python/{{py}}
      - "{{versions.bowtie2.addmod}}"
    pkgmake: make -j 8 
  extras: AUTHORS README
  install:
     makeinstall: >
       echo "{{versions.perl}}" > ../PERLVERSION;
       mkdir -p $(ROOT){{root}};
       make -e install DESTDIR=$(ROOT) PREFIX={{root}};
       $(TAR) cf - example doc scripts |
       $(TAR) -x -C $(ROOT){{root}};
       chmod -R a+rX $ $(ROOT){{root}}{doc,example,scripts}
  requires:
    - "{{compiler}}_{{compiler_version}}"
    - perl_{{versions.perl}}
    - perl_{{versions.perl}}-Math-Random
    - python_{{py}}
    - "{{versions.bowtie2.addreq}}"
  rpmFilters: *filterRequiresProvides
