!include common.yaml
---
- package: 
  name: repeatmasker 
  release: "2"
  version: "{{versions.repeatmasker}}"
  vendor_source: http://www.repeatmasker.org/RepeatMasker-{{version}}.{{extension}}
  src_dir: RepeatMasker
  description: |
    RepeatMasker is a program that screens DNA sequences for interspersed repeats and low 
    complexity DNA sequences. The output of the program is a detailed annotation of the 
    repeats that are present in the query sequence as well as a modified version of the 
    query sequence in which all the annotated repeats have been masked. Sequence comparisons 
    in RepeatMasker are performed by one of several popular search engines including nhmmer, 
    cross_match, ABBlast/WUBlast, RMBlast and Decypher. RepeatMasker makes use of curated 
    libraries of repeats and currently supports Dfam (profile HMM library derived from 
    Repbase sequences) and Repbase, a service of the Genetic Information Research Institute
  build:
    modules: 
      - perl/{{versions.perl}}
      - python/{{versions.python3}}
      - trf/{{versions.trf}}
      - ncbi-blast/{{versions.ncbiblast}}
      - hmmer/{{versions.hmmer}}
    pkgmake: echo 
  install:
     makeinstall: >
       mkdir -p $(ROOT){{root}};
       sed -i '/\.*maskFile.pl/d' configure;
       perl ./configure -trf_prgm $$TRF_HOME/bin/trf -hmmer_dir $$HMMER_HOME/bin -rmblast_dir $$BLAST_HOME/bin -default_search_engine nhmmer;
       sed -i 's%/usr/local/bin/perl%/usr/bin/env perl%' *.pm util/*;
       /bin/rm *.pm.bak;
       $(TAR) cf - . | (cd $(ROOT){{root}}; tar xf -)
  requires:
      - perl_{{versions.perl}}
